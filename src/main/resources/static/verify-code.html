<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>이메일 인증</title>
  <link rel="icon" href="data:,">
</head>
<body>
<h1>이메일 인증</h1>
<p>이메일로 전송된 인증 코드를 입력해주세요.</p>

<input id="email" type="email" placeholder="이메일 입력" />
<input id="code" type="text" placeholder="인증 코드 입력" />
<button id="verify-btn">인증하기</button>
<button onclick="history.back()">뒤로가기</button>

<script>
  document.getElementById("verify-btn").onclick = async function () {
    const email = document.getElementById("email").value;
    const code = document.getElementById("code").value;

    if (!email || !code) {
      alert("이메일과 인증 코드를 모두 입력해주세요.");
      return;
    }

    try {
      const res = await fetch("/email/verify", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, code })
      });

      if (res.ok) {
        alert("인증 성공! 회원가입을 계속 진행해주세요.");
        window.location.href = "/signup.html"; // 다시 회원가입 페이지로 이동
      } else {
        const error = await res.text();
        alert("인증 실패: " + error);
      }
    } catch (err) {
      alert("네트워크 오류: " + err.message);
    }
  };
</script>
</body>
</html>