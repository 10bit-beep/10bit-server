<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>이메일 인증 요청</title>
    <!-- favicon 문제 해결을 위한 기본 favicon -->
    <link rel="icon" href="data:,">
</head>
<body>
<h1>이메일 인증 코드 받기</h1>
<input id="email" type="email" placeholder="이메일 입력" />
<button id="send-code-btn">인증 코드 받기</button>

<script>
    document.getElementById("send-code-btn").onclick = async function() {
        const email = document.getElementById("email").value;
        if (!email) {
            alert("이메일을 입력하세요");
            return;
        }

        try {
            console.log('요청 URL:', `/auth/email?email=${encodeURIComponent(email)}`);
            const res = await fetch(`/auth/email?email=${encodeURIComponent(email)}`);

            if (res.ok) {
                const message = await res.text();
                alert("인증 코드가 전송되었습니다. 이메일을 확인하세요.");
                console.log('성공:', message);
            } else {
                const error = await res.text();
                alert("인증 코드 전송에 실패했습니다: " + error);
                console.error('실패:', error);
            }
        } catch (error) {
            alert("네트워크 오류: " + error.message);
            console.error('네트워크 오류:', error);
        }
    };
</script>
</body>
</html>